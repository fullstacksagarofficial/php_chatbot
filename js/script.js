// DESIGNED BY ATECHSEVA
// OWNER : developer.sagar10@gmail.com || atechseva@gmail.com
// website: https://www.atechseva.com/
function checkemail() { "" === document.getElementById("email").value.trim() ? document.getElementById("emailsubmit").disabled = !0 : document.getElementById("emailsubmit").disabled = !1 } function checkmessage() { "" === document.getElementById("usermessage").value.trim() ? document.getElementById("usermessageSubmit").disabled = !0 : document.getElementById("usermessageSubmit").disabled = !1 } function scrollToBottom() { const e = document.getElementById("chat-box"); e.scrollTop = e.scrollHeight } function logout() { jQuery(".details").html('<span class="skeleton-box" style="width:80%;"></span>'), $.ajax({ type: "post", url: "action/logout.php", success: function (e) { $("#menu-wrap").css("visibility", "hidden"), jQuery("#email").val(""), getchats() } }) } function getchats() { jQuery(".details").html('<span class="skeleton-box" style="width:80%;"></span>'), $.ajax({ type: "get", url: "action/getchats.php", success: function (e) { jQuery(".details").html('<p id="botmsg">Hi How can i help you ?</p>'); var t = JSON.parse(e); t.success ? (jQuery("#step1area").html(t.success), checkmessage(), scrollToBottom()) : t.newuser ? (jQuery("#step1area").html(t.newuser), checkmessage(), scrollToBottom()) : (t.fail, jQuery(".chat-area").html(t.fail)) } }) } checkmessage(), $(document).on("submit", ".emailform", (function (e) { e.preventDefault(), checkemail(); var t = jQuery("#email").val(); jQuery.ajax({ url: "action/addemail.php", type: "post", data: "email=" + t, success: function (e) { "success" == e ? (jQuery("#email").val(""), getchats()) : $("#botmsg").html("Something Went Wrong ! Please Enter Valid Email") } }) })), $(document).on("submit", "#usermessageform", (function (e) { e.preventDefault(); var t = jQuery("#usermessage").val(), s = '<div class="chat outgoing"><div class="details"> <p>' + t + "</p></div></div>"; jQuery("#chat-box").append(s), jQuery("#usermessage").val(""), t && jQuery.ajax({ url: "action/get_bot_message.php", type: "post", data: "txt=" + t, success: function (e) { var t = '<div class="chat incoming"><img src="https://www.atechseva.com/demo/cms/assets/img/avtar.png" alt=""><div class="details"> <p>' + e + "</p></div></div>"; jQuery("#chat-box").append(t), scrollToBottom() } }) })), getchats();